


       stage('Code Checkout') {
         checkout([$class: 'GitSCM', branches: [[name: '*/master']], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'deepakgitlabcreds', url: 'https://repo.hclets.com/amit_srivastava/ELKStack.git']]])
        }

        stage('Code Quality Analysis - Functional Testing') {
                echo 'Analysing code...'
                withCredentials([usernamePassword(credentialsId: 'sonarqube', passwordVariable: 'sonarpassword', usernameVariable: 'sonaruser')]){
                sh '''
                cd $WORKSPACE/Essentials/FunctionalTest
                export JAVA_HOME=/opt/assessment-portal/jdk-11/
		        export PATH=/opt/assessment-portal/jdk-11/bin:$PATH
                mvn clean package
                mvn sonar:sonar -Dsonar.login=${sonaruser} -Dsonar.password=${sonarpassword} -Dsonar.exclusions=**/swagger/**/*,**/model/**/* -Dsonar.host.url=\'https://sonar-almsmart.demos.hclets.com/\''''
                }
        }

}