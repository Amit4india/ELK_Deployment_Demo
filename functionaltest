pipeline {
    agent any
    tools {
            maven 'mvn'
        }
        parameters {
         string(name: 'EndpointURL', defaultValue:'' , description: 'Enter the EndpointURL')
        }
     stages {


                   stage('FunctionalTest') {

                             steps {
                                           echo "Starting Functional Test"
                                            sh '''
                                            cd Essentials/elkFunctionalTesting
                                            mvn clean test -DEndpointURL="$EndpointURL"
                                            '''
                             }
                             }
                  }
                   post {
                          always {
                              archiveArtifacts  "target/**/*"
                              junit 'target/surefire-reports/*.xml'
                          }
                      }
           }